$(document).ready(function() {  
   
     // Load content
     var hash = window.location.hash.substr(1);  
     var href = $('#mainNavigation li a').each(function(){  
         var href = $(this).attr('href');
		 var bgcolour = $(this).attr('class');
         if(hash==href.substr(0,href.length-5)){  
             var toLoad = hash+'.html #section';
 			 $("#contentContainer").animateToClass(bgcolour, 500); 
             $('#section').load(toLoad)  
         }  
     });  
   
     $('#mainNavigation li a').click(function(){  
   
     	var toLoad = $(this).attr('href');
 		var bgcolour = $(this).attr('class');
		$('#section').animate({height:'toggle'}, 500, 'swing', loadContent);
     	//$('#load').remove();  
     	//$('#wrapper').append('<span id="load">LOADING...</span>');  
     	//$('#load').fadeIn('normal');  
     	window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);  
     	function loadContent() {  
         	//$('#section').load(toLoad,'',showNewContent()) 
			var $page = $('<div />').load(toLoad + ' #section,#email');
			var $content = $("#section", $page);
			var $heading = $page.find("#email");
			$('#section').replaceWith($content);
			
			//$('li.item-ii').find('li') is equivalent to $('li', 'li.item-ii').
			
     	}  
     	function showNewContent() { 
		 	$("#contentContainer").animateToClass(bgcolour, 500, 'swing');
			$('#section').animate({height:'toggle'}, 500, 'swing', hideLoader);
     	}  
     	function hideLoader() {  
         	//$('#load').fadeOut('normal');  
     	}  
     	return false;  
   
     });


		// set up tooltips
		$("#contactLinks a").each(
			
			function( index ){
				$(this).tooltip(
				{	
					tip: '#'+$(this).attr('id')+'Tooltip',
					effect: 'slide',
					direction: 'right',
					position: 'bottom left',
					offset: [-26,-9]
				});
			
			}
		
		);
		
		// set up colours
	
		$('#mainNavigation li').bind('click',
			
			function() {
				var colour = $(this).attr('class');
				var colourString = $([colour]);
				$(this).animate( { backgroundColor: colourString }, 1000);
			}
			
		);

});